{"ast":null,"code":"var _jsxFileName = \"/Users/ywang/Desktop/fiber_monitor_display/frontend/src/store/events-context.js\",\n  _s = $RefreshSig$();\nimport { createContext, useEffect, useState } from 'react';\nimport useFetch from \"../Api/Api\";\nimport { BACKEND_SERVER } from '../Const';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const EventsContext = /*#__PURE__*/createContext({\n  events: [],\n  setEvents: () => {}\n});\nexport const EventsContextProvider = props => {\n  _s();\n  const [events, setEvents] = useState([]);\n  const {\n    data: eventData,\n    loading: eventLoading\n  } = useFetch(BACKEND_SERVER + 'events');\n  useEffect(() => {\n    if (!eventLoading) {\n      if (eventData.success) {\n        const eventsGeojson = {\n          \"type\": \"FeatureCollection\",\n          \"features\": eventData.res.map(event => {\n            return {\n              \"type\": \"Feature\",\n              \"properties\": {\n                \"event_id\": event.event_id,\n                \"time\": event.time,\n                \"Port\": event.port,\n                \"event_type\": event.event_type,\n                \"from\": event.start,\n                \"to\": event.end,\n                \"unit\": event.unit,\n                \"duration\": event.duration\n              },\n              \"geometry\": event.geometry\n            };\n          })\n        };\n        setEvents(eventsGeojson);\n      }\n    }\n  }, [eventLoading, eventData]);\n  return /*#__PURE__*/_jsxDEV(EventsContext.Provider, {\n    value: {\n      events: events,\n      setEvents: setEvents\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n};\n_s(EventsContextProvider, \"c7EGzRjLNGW/F5pjoC5nfkhXSek=\", false, function () {\n  return [useFetch];\n});\n_c = EventsContextProvider;\nexport default EventsContext;\nvar _c;\n$RefreshReg$(_c, \"EventsContextProvider\");","map":{"version":3,"names":["createContext","useEffect","useState","useFetch","BACKEND_SERVER","jsxDEV","_jsxDEV","EventsContext","events","setEvents","EventsContextProvider","props","_s","data","eventData","loading","eventLoading","success","eventsGeojson","res","map","event","event_id","time","port","event_type","start","end","unit","duration","geometry","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/ywang/Desktop/fiber_monitor_display/frontend/src/store/events-context.js"],"sourcesContent":["import { createContext, useEffect, useState } from 'react';\nimport useFetch from \"../Api/Api\"\nimport { BACKEND_SERVER } from '../Const'\n\nexport const EventsContext = createContext({\n  events: [],\n  setEvents: () => {}\n})\n\nexport const EventsContextProvider = (props) => {\n  const [events, setEvents] = useState([])\n\n  const {data: eventData, loading: eventLoading, } = useFetch(BACKEND_SERVER + 'events')\n  useEffect(() => {\n    if (!eventLoading) {\n      if (eventData.success) {\n        const eventsGeojson = {\n          \"type\": \"FeatureCollection\",\n          \"features\": eventData.res.map((event) => {\n            return {\n              \"type\": \"Feature\",\n              \"properties\": {\n                \"event_id\": event.event_id,\n                \"time\": event.time,\n                \"Port\": event.port,\n                \"event_type\": event.event_type,\n                \"from\": event.start,\n                \"to\": event.end,\n                \"unit\": event.unit,\n                \"duration\": event.duration\n              },\n              \"geometry\": event.geometry\n            }\n          })\n        }\n        setEvents(eventsGeojson)\n      }\n    }\n  }, [eventLoading, eventData])\n\n  return (\n    <EventsContext.Provider\n      value = {{\n        events: events,\n        setEvents: setEvents\n      }}\n    >\n      {props.children}\n    </EventsContext.Provider>\n  )\n}\n\nexport default EventsContext;"],"mappings":";;AAAA,SAASA,aAAa,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,OAAOC,QAAQ,MAAM,YAAY;AACjC,SAASC,cAAc,QAAQ,UAAU;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEzC,OAAO,MAAMC,aAAa,gBAAGP,aAAa,CAAC;EACzCQ,MAAM,EAAE,EAAE;EACVC,SAAS,EAAEA,CAAA,KAAM,CAAC;AACpB,CAAC,CAAC;AAEF,OAAO,MAAMC,qBAAqB,GAAIC,KAAK,IAAK;EAAAC,EAAA;EAC9C,MAAM,CAACJ,MAAM,EAAEC,SAAS,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EAExC,MAAM;IAACW,IAAI,EAAEC,SAAS;IAAEC,OAAO,EAAEC;EAAc,CAAC,GAAGb,QAAQ,CAACC,cAAc,GAAG,QAAQ,CAAC;EACtFH,SAAS,CAAC,MAAM;IACd,IAAI,CAACe,YAAY,EAAE;MACjB,IAAIF,SAAS,CAACG,OAAO,EAAE;QACrB,MAAMC,aAAa,GAAG;UACpB,MAAM,EAAE,mBAAmB;UAC3B,UAAU,EAAEJ,SAAS,CAACK,GAAG,CAACC,GAAG,CAAEC,KAAK,IAAK;YACvC,OAAO;cACL,MAAM,EAAE,SAAS;cACjB,YAAY,EAAE;gBACZ,UAAU,EAAEA,KAAK,CAACC,QAAQ;gBAC1B,MAAM,EAAED,KAAK,CAACE,IAAI;gBAClB,MAAM,EAAEF,KAAK,CAACG,IAAI;gBAClB,YAAY,EAAEH,KAAK,CAACI,UAAU;gBAC9B,MAAM,EAAEJ,KAAK,CAACK,KAAK;gBACnB,IAAI,EAAEL,KAAK,CAACM,GAAG;gBACf,MAAM,EAAEN,KAAK,CAACO,IAAI;gBAClB,UAAU,EAAEP,KAAK,CAACQ;cACpB,CAAC;cACD,UAAU,EAAER,KAAK,CAACS;YACpB,CAAC;UACH,CAAC;QACH,CAAC;QACDrB,SAAS,CAACS,aAAa,CAAC;MAC1B;IACF;EACF,CAAC,EAAE,CAACF,YAAY,EAAEF,SAAS,CAAC,CAAC;EAE7B,oBACER,OAAA,CAACC,aAAa,CAACwB,QAAQ;IACrBC,KAAK,EAAI;MACPxB,MAAM,EAAEA,MAAM;MACdC,SAAS,EAAEA;IACb,CAAE;IAAAwB,QAAA,EAEDtB,KAAK,CAACsB;EAAQ;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACQ;AAE7B,CAAC;AAAAzB,EAAA,CAzCYF,qBAAqB;EAAA,QAGmBP,QAAQ;AAAA;AAAAmC,EAAA,GAHhD5B,qBAAqB;AA2ClC,eAAeH,aAAa;AAAC,IAAA+B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}